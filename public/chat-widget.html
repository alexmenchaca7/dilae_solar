<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Chat Widget</title>
    <style>
      html, body {
        margin: 0;
        padding: 0;
        overflow: hidden;
      }
    </style>
</head>
<body>
  <div id="odoo-chat-container"></div>

  <script>
        (function() {
        const root = window.top || window;
        if (root.odooChatLoaded) return;
        root.odooChatLoaded = true;

        function loadScript(src) {
            return new Promise((resolve, reject) => {
            const s = document.createElement('script');
            s.src = src;
            s.defer = true;
            s.onload = resolve;
            s.onerror = reject;
            document.body.appendChild(s);
            });
        }

        const sources = [
            "https://dashboard.dilaesolar.com/im_livechat/loader/1",
            "https://dashboard.dilaesolar.com/im_livechat/assets_embed.js"
        ].filter(src => !document.querySelector(`script[src="${src}"]`));

        Promise.all(sources.map(loadScript)).then(() => {
            console.log("Odoo chat cargado una sola vez");
        });
        })();
    </script>
</body>
</html>