<main class="contenedor seccion">
    <div class="blogs">
        <?php if (!empty($blogs)) : ?>
            <div class="blogs__grid">
                <?php foreach ($blogs as $blog) : ?>
                    <div class="blog">
                        <a href="/blog/<?php echo htmlspecialchars($blog->slug); ?>" class="blog__imagen">
                            <picture>
                                <source srcset="/img/blogs/<?php echo $blog->imagen; ?>.webp" type="image/webp">
                                <source srcset="/img/blogs/<?php echo $blog->imagen; ?>.png" type="image/png">
                                <img loading="lazy" src="/img/blogs/<?php echo $blog->imagen; ?>.png" alt="Imagen de Entrada de Blog">
                            </picture>
                        </a>
                        <div class="blog__contenido">
                            <small><?php echo date('d M Y', strtotime($blog->fecha_creacion)); ?>  -  <?php echo $blog->lectura_estimada; ?> Min. de lectura</small>
                            <a href="/blog/<?php echo htmlspecialchars($blog->slug); ?>">
                                <h2><?php echo $blog->titulo; ?></h2>
                                <p><?php echo substr(strip_tags($blog->contenido), 0, 100) . '...'; ?></p>
                            </a>
                        </div>
                        <hr class="blog__division">
                        <div class="blog__acciones">
                            <div class="blog__meta">
                                <span>
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 13" fill="none">
                                        <path d="M8.98175 0.0442839C6.42933 0.366909 3.96677 1.73909 1.51237 4.19757C0.777271 4.93675 0.230034 5.56566 0.107518 5.8107C-0.0190813 6.06798 -0.0354167 6.43961 0.0666798 6.74998C0.152441 7.01135 0.450563 7.36665 1.35718 8.2896C3.74215 10.7236 6.04545 12.108 8.47943 12.5654C9.12468 12.6879 10.4601 12.7165 11.138 12.6267C13.5475 12.2918 15.8998 11.0013 18.2399 8.72249C18.979 8.00373 19.7795 7.11753 19.9061 6.87658C19.9837 6.72956 20 6.63972 20 6.33343C20 6.00672 19.9877 5.94138 19.8857 5.75761C19.6488 5.33288 18.0561 3.69526 17.1495 2.94382C15.2096 1.33887 13.3882 0.436335 11.4035 0.097374C10.7827 -0.0047226 9.58616 -0.033309 8.98175 0.0442839ZM10.9542 1.33478C11.7424 1.42463 12.8655 1.77584 13.7027 2.19648C15.1974 2.94382 16.7819 4.20982 18.2684 5.83928L18.7136 6.32118L18.5829 6.48862C18.3583 6.7704 17.1372 8.00373 16.7166 8.37536C14.9033 9.96398 13.2698 10.8624 11.4852 11.2463C11.0114 11.3443 10.9012 11.3525 10.015 11.3525C9.12876 11.3525 9.0185 11.3443 8.54477 11.2463C6.25373 10.7522 4.00352 9.29014 1.76148 6.82758L1.31634 6.34568L1.45111 6.17824C1.69206 5.86787 2.88046 4.67538 3.38686 4.23024C5.46146 2.40884 7.56056 1.40421 9.5249 1.29395C10.0721 1.26536 10.4193 1.27353 10.9542 1.33478Z" fill="black"/>
                                        <path d="M9.19859 3.13169C8.59417 3.29096 8.08369 3.58908 7.64672 4.05055C7.32409 4.38951 7.2465 4.49569 7.05864 4.86733C6.81361 5.36147 6.73193 5.72494 6.73193 6.33343C6.73193 6.76224 6.74827 6.92559 6.82178 7.18696C7.16074 8.37536 8.14903 9.31465 9.31702 9.56376C9.66415 9.63727 10.3666 9.63727 10.7137 9.56376C11.8817 9.31465 12.87 8.37536 13.2089 7.18696C13.3396 6.72548 13.3396 5.94138 13.2089 5.4799C12.8741 4.31192 11.9634 3.42164 10.7995 3.12352C10.3788 3.01734 9.62331 3.02142 9.19859 3.13169ZM10.8771 4.5447C12.1267 5.16545 12.4003 6.75407 11.4202 7.7342C11.2405 7.91388 11.0731 8.03232 10.8444 8.14258C10.5299 8.29368 10.5218 8.29368 10.0154 8.29368C9.51304 8.29368 9.50079 8.2896 9.18633 8.14258C8.61459 7.86896 8.18579 7.33398 8.05919 6.72957C7.88358 5.89237 8.30422 4.98984 9.05157 4.59371C9.44362 4.38543 9.58247 4.35276 10.0807 4.36501C10.5218 4.37318 10.5422 4.37726 10.8771 4.5447Z" fill="black"/>
                                    </svg>
                                    <?php echo $blog->views ?? 0; ?>
                                </span>
                            </div> 

                            <div class="blog__btn-favorito">
                                <button <?php echo (isset($_SESSION['liked_blogs']) && in_array($blog->id, $_SESSION['liked_blogs'])) ? 'liked' : ''; ?>" data-id="<?php echo $blog->id; ?>">
                                    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 18" fill="none">
                                        <path d="M4.92777 0.0250549C3.68121 0.181364 2.63785 0.693275 1.7547 1.58424C0.961435 2.38141 0.484693 3.22548 0.211152 4.32355C-0.273405 6.22661 0.0782899 8.10232 1.24279 9.8647C1.98917 10.994 2.95437 12.0296 4.72457 13.6083C5.85 14.6126 9.28489 17.5434 9.45292 17.6411C9.60923 17.7349 9.66784 17.7466 10 17.7466C10.3322 17.7466 10.3908 17.7349 10.5471 17.6411C10.7151 17.5434 14.1578 14.6087 15.2754 13.6083C17.0534 12.0218 18.0108 10.9901 18.7572 9.8647C19.9217 8.10232 20.2734 6.22661 19.7888 4.32355C19.5153 3.22548 19.0386 2.38141 18.2453 1.58424C17.4559 0.790968 16.6119 0.333765 15.506 0.0993004C14.9511 -0.017931 13.9273 -0.0296535 13.4427 0.0797634C12.0906 0.372843 11.0551 1.04888 10.1094 2.25246L10 2.38923L9.89449 2.25246C8.96055 1.07232 7.94063 0.396288 6.63936 0.0993004C6.25249 0.00942421 5.36153 -0.0296535 4.92777 0.0250549ZM6.23295 1.21691C7.34275 1.4123 8.30014 2.05316 9.05824 3.11216C9.18719 3.29582 9.34741 3.51465 9.40993 3.60453C9.69911 4.01093 10.3009 4.01093 10.5901 3.60453C10.6526 3.51465 10.8128 3.29582 10.9418 3.11216C11.9773 1.6663 13.4193 0.986355 14.9902 1.20128C16.733 1.43965 18.0929 2.65886 18.6126 4.45251C19.0229 5.87101 18.8432 7.35985 18.0968 8.7002C17.4716 9.82172 16.4282 10.9979 14.6111 12.6275C13.7319 13.4129 10.0352 16.5938 10 16.5938C9.96092 16.5938 6.27985 13.4246 5.38889 12.6275C2.59486 10.1226 1.49289 8.55952 1.22716 6.7268C1.05522 5.54276 1.30141 4.26884 1.89929 3.26456C2.79807 1.75227 4.54873 0.923832 6.23295 1.21691Z" fill="#FF0000"/>
                                    </svg>
                                </button>
                                <span class="likes-count"><?php echo $blog->likes ?? 0; ?></span>
                            </div>
                        </div>
                    </div>
                <?php endforeach; ?>
            </div>
            <div class="blogs__paginacion">
                <?php echo $paginacion; ?>
            </div>
        <?php else : ?>
            <p>No hay blogs para mostrar.</p>
        <?php endif; ?>
    </div>
</main>